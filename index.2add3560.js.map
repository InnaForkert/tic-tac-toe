{"mappings":"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","sources":["src/index.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nexports.stuf = void 0;\nexports.stuf = [];\nvar menu = document.querySelector(\".menu\");\nvar field = document.querySelector(\".field\");\nvar form = document.querySelector(\".form\");\nvar player1 = document.querySelector(\"#player1\");\nvar player2 = document.querySelector(\"#player2\");\nvar player1GameName = document.querySelector(\"#player1Name\");\nvar player2GameName = document.querySelector(\"#player2Name\");\nvar fieldies = document.querySelectorAll(\".fieldy\");\nvar winningCombos = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9],\n    [1, 4, 7],\n    [2, 5, 8],\n    [3, 6, 9],\n    [1, 5, 9],\n    [3, 5, 7],\n];\nvar currentComboX = [];\nvar currentComboO = [];\nvar currentSymbol = \"X\";\nvar activePlayer = \"\";\nvar player1Name;\nvar player2Name;\nif (form)\n    form.addEventListener(\"submit\", handleSubmit);\nfieldies.forEach(function (fieldy) {\n    fieldy.addEventListener(\"click\", handlePlayerMove);\n});\n(function checkSaves() {\n    var currentSaveX = localStorage.getItem(\"playerX\");\n    if (currentSaveX) {\n        currentComboX = JSON.parse(currentSaveX);\n        paintSaved(\"X\", currentComboX);\n    }\n    var currentSaveO = localStorage.getItem(\"playerO\");\n    if (currentSaveO) {\n        currentComboO = JSON.parse(currentSaveO);\n        paintSaved(\"O\", currentComboO);\n    }\n    var name1 = localStorage.getItem(\"player1\");\n    var name2 = localStorage.getItem(\"player2\");\n    if (name1 && name2) {\n        setPlayers(name1, name2);\n        showField();\n    }\n    var savedActive = localStorage.getItem(\"activePlayer\");\n    if (savedActive)\n        currentSymbol = JSON.parse(savedActive);\n})();\nfunction reset() {\n    localStorage.removeItem(\"playerX\");\n    localStorage.removeItem(\"playerO\");\n    localStorage.removeItem(\"activePlayer\");\n    location.reload();\n}\nfunction restart() {\n    localStorage.clear();\n    location.reload();\n}\nfunction paintSaved(N, arr) {\n    fieldies.forEach(function (fieldy) {\n        if (fieldy.dataset.id && arr.includes(+fieldy.dataset.id)) {\n            fieldy.innerText = N;\n        }\n    });\n}\nfunction saveData() {\n    localStorage.setItem(\"playerX\", JSON.stringify(currentComboX));\n    localStorage.setItem(\"playerO\", JSON.stringify(currentComboO));\n}\nfunction checkForVictory(arr) {\n    var victory = winningCombos.find(function (combo) {\n        return combo.every(function (num) { return arr.includes(num); });\n    });\n    if (victory) {\n        setTimeout(function () {\n            var wantsMore = confirm(\"Victory! One more round?\");\n            if (wantsMore)\n                reset();\n            else\n                restart();\n        }, 0);\n    }\n    else\n        checkForNoMoves();\n}\nfunction checkForNoMoves() {\n    if (currentComboO.length === 4 && currentComboX.length === 5) {\n        setTimeout(function () {\n            var wantsReset = confirm(\"Oh no, no more moves! Reset?\");\n            if (wantsReset) {\n                console.log(player2Name);\n                localStorage.setItem(\"player1\", player2Name);\n                localStorage.setItem(\"player2\", player1Name);\n                reset();\n            }\n            else {\n                restart();\n            }\n            return;\n        }, 0);\n    }\n}\nfunction handlePlayerMove(e) {\n    var target = e.target;\n    target.removeEventListener(\"click\", handlePlayerMove);\n    target.innerText = currentSymbol;\n    if (currentSymbol === \"X\") {\n        currentComboX.push(Number(target.dataset.id));\n        if (currentComboX.length > 2)\n            checkForVictory(currentComboX);\n    }\n    else {\n        currentComboO.push(Number(target.dataset.id));\n        if (currentComboO.length > 2)\n            checkForVictory(currentComboO);\n    }\n    currentSymbol = currentSymbol === \"X\" ? \"O\" : \"X\";\n    localStorage.setItem(\"activePlayer\", JSON.stringify(currentSymbol));\n    swapPlayers();\n    saveData();\n}\nfunction swapPlayers() {\n    if (activePlayer === \"\" || player1Name) {\n        activePlayer = player2Name;\n    }\n    else {\n        activePlayer = player1Name;\n    }\n    player1GameName === null || player1GameName === void 0 ? void 0 : player1GameName.classList.toggle(\"active-player\");\n    player2GameName === null || player2GameName === void 0 ? void 0 : player2GameName.classList.toggle(\"active-player\");\n}\nfunction handleSubmit(e) {\n    e.preventDefault();\n    player1Name = (player1 === null || player1 === void 0 ? void 0 : player1.value) || \"Player1\";\n    player2Name = (player2 === null || player2 === void 0 ? void 0 : player2.value) || \"Player2\";\n    localStorage.setItem(\"player1\", player1Name);\n    localStorage.setItem(\"player2\", player2Name);\n    showField();\n    setPlayers(player1Name, player2Name);\n}\nfunction setPlayers(name1, name2) {\n    if (player1GameName && player2GameName) {\n        player1GameName.innerText = name1;\n        player2GameName.innerText = name2;\n    }\n}\nfunction showField() {\n    menu === null || menu === void 0 ? void 0 : menu.classList.add(\"visually-hidden\");\n    field === null || field === void 0 ? void 0 : field.classList.remove(\"visually-hidden\");\n}\n"],"names":["exports","__esModule","stuf","player1Name","player2Name","menu","document","querySelector","field","form","player1","player2","player1GameName","player2GameName","fieldies","querySelectorAll","winningCombos","currentComboX","currentComboO","currentSymbol","activePlayer","reset","localStorage","removeItem","location","reload","restart","clear","paintSaved","N","arr","forEach","fieldy","dataset","id","includes","innerText","saveData","setItem","JSON","stringify","checkForVictory","find","combo","every","num","setTimeout","confirm","checkForNoMoves","length","console","log","handlePlayerMove","e","target","removeEventListener","push","Number","swapPlayers","classList","toggle","handleSubmit","preventDefault","value","showField","setPlayers","name1","name2","add","remove","addEventListener","currentSaveX","getItem","parse","currentSaveO","savedActive"],"version":3,"file":"index.2add3560.js.map"}